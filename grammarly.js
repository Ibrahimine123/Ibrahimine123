!function(){"use strict";!function(){const e={version:"0.0.1"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var e=[{match:/auth.grammarly.com\/v3\/user/,overrideFunc:e=>((e.free||"Free"===e.type)&&(e.editorFeatures={...e.editorFeatures,scoreDisabled:!1,quickReplacement:!0,fullCards:!0,proofit:!0,msWordEnabled:!0,msOutlookEnabled:!0,docsDisabled:!1},e.type="Premium",e.free=!1),e)},{match:/subscription.grammarly.com\/api\/v1\/subscription/,overrideFunc:e=>(e.isPremium||(e.isPremium=!0,e.expirationDate="Dec 31, 2099 12:00:00 AM"),e)}];const t=fetch;var r="Tone Detector ðŸ¤”",o=" Â· ðŸ’Ž Premium Revealed",n="ðŸ¥µ Grammarly Unlock is unable to correct errors because the server does not return solutions for free users, but you can see and fix them yourself.";const a=async e=>await(await async function(e,t={}){const{timeout:r=8e3}=t,o=new AbortController,n=setTimeout((()=>o.abort()),r),a=await fetch(e,{...t,signal:o.signal});return clearTimeout(n),a}(`https://script.blueagle.top/chrome_extension/grammarly/${e}`,{cache:"no-cache"})).json();var s=new class{#e={isOpen:!0,version:{latest:process.env.version,forcedUpdate:!1,updateUrl:"https://github.com/blueagler/Grammarly-Unlock/releases"}};#t=[];async loadConfig(){try{const e=await a("config.json");e&&(this.#e={...this.#e,...e})}catch(e){console.error(e),localStorage.getItem("GrammarlyUnlockServerConfig")&&(this.#e={...this.#e,...JSON.parse(localStorage.getItem("serverConfig"))})}return localStorage.setItem("GrammarlyUnlockServerConfig",JSON.stringify(this.#e)),this.#e}getConfig(){return this.#e}getEmotions(){return this.#t}setEmotions(e){this.#t=e}};function i({emoji:e,name:t,confidence:r}){return`<grammarly-unlock-emotion>${e} ${o=t,o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()}<grammarly-unlock-emotion-progress><grammarly-unlock-emotion-progress-inner style="transform: translateX(${100*r}%)"></grammarly-unlock-emotion-progress-inner></grammarly-unlock-emotion-progress></grammarly-unlock-emotion>`;var o}function c(){const e=document.createElement("style");e.innerText="grammarly-unlock-emotions{border: 1px solid #ffdf80;border-radius: calc(0.25px * var(--rem));box-sizing: border-box;margin: calc(0.25px * var(--rem)) calc(1px * var(--rem));}grammarly-unlock-emotions-title, grammarly-unlock-emotion{margin: calc(0.25px * var(--rem));padding: calc(0.5px * var(--rem));}grammarly-unlock-emotions-title{display: block;line-height: 1.125rem;color: rgba(0, 0, 0, 1);}grammarly-unlock-emotion{display: block;}grammarly-unlock-emotion-progress{background-color: #fff8ec;border-radius: calc(0.375px * var(--rem));margin-bottom: calc(-0.25px * var(--rem));transform: scale(.25);transform-origin: left;width: 400%;display: block;overflow: hidden;}grammarly-unlock-emotion-progress-inner{background-color: #ffdf80;height: calc(0.75px * var(--rem));margin-left: -100%;width: 100%;display: block;}",document.head.appendChild(e);new MutationObserver((()=>{const e=function(e){let t=[];for(const r of document.querySelectorAll("*"))for(const o of r.classList)e.test(o)&&t.push(r);return t}(/^navigation-wrapper/)?.[0]??null;e&&!e.querySelector("grammarly-unlock-emotions")&&e.prepend(function(){const e=document.createElement("grammarly-unlock-emotions"),t=document.createElement("grammarly-unlock-emotions-title");t.innerText=r;const o=document.createElement("grammarly-unlock-emotions-container");if(s.getEmotions().length>0)for(const e of s.getEmotions())o.innerHTML+=i(e);return e.appendChild(t),e.appendChild(o),e}())})).observe(document.body,{childList:!0,subtree:!0})}var l=[{match:/capi.grammarly.com\/freews/,overrideFunc:e=>((e=JSON.parse(e)).hidden&&(delete e.hidden,e.minicardTitle=`${e.cardLayout.bundle}${o}`,e.title=`${e.title} - ${e.cardLayout.bundle}â—ï¸`,e.point=e.category,e.explanation=e.cardLayout.outcomeDescription,e.details=n),"emotions"===e.action&&function(e){s.setEmotions(e);let t=document.querySelector("grammarly-unlock-emotions-container");if(!t)return;let r="";for(const t of e)r+=i(t);t.innerHTML=r}(e.emotions),JSON.stringify(e))}];const m=WebSocket;class u{constructor(e){this.bubbles=e.bubbles||!1,this.cancelBubble=e.cancelBubble||!1,this.cancelable=e.cancelable||!1,this.currentTarget=e.currentTarget||null,this.data=e.data||null,this.defaultPrevented=e.defaultPrevented||!1,this.eventPhase=e.eventPhase||0,this.lastEventId=e.lastEventId||"",this.origin=e.origin||"",this.path=e.path||new Array(0),this.ports=e.parts||new Array(0),this.returnValue=e.returnValue||!0,this.source=e.source||null,this.srcElement=e.srcElement||null,this.target=e.target||null,this.timeStamp=e.timeStamp||null,this.type=e.type||"message",this.__proto__=e.__proto__||MessageEvent.__proto__}}function d(e,t){const r=l.filter((({match:e})=>e.test(t)));for(const t of r)t.overrideFunc&&(e.data=t.overrideFunc(e.data));return e}function g(){fetch=t,WebSocket=m}async function p(){!function(){const e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=G-BTPLS45Z6R",e.async=!0,e.onload=function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BTPLS45Z6R")},document.body.appendChild(e)}()}fetch=async(...r)=>{const o=await t(...r),n=e.filter((({match:e})=>e.test(o.url)));if(n.length>0){let e=await o.clone().json();for(const t of n)t.overrideFunc&&(e=t.overrideFunc(e));return new Response(JSON.stringify(e),{status:o.status,headers:o.headers})}return o},WebSocket=class{constructor(e,t){this.url=e,this.protocols=t;const r=this.protocols?new m(e,t):new m(e),o=r.addEventListener;return r.addEventListener=function(){return"message"===arguments[0]&&(arguments[1]=function(e){return()=>{arguments[0]=d(new u(arguments[0]),r.url),null!==arguments[0]&&e.apply(this,arguments)}}.call(this,arguments[1])),o.apply(this,arguments)},Object.defineProperty(r,"onmessage",{set:function(){const e=arguments[0],t=function(){arguments[0]=d(new u(arguments[0]),r.url),null!==arguments[0]&&e.apply(this,arguments)}.bind(this);o.apply(this,["message",t,!1])}}),r}},c(),async function(){const e=await s.loadConfig();try{if(e.version.latest!==process.env.version&&e.version.forcedUpdate)throw window.confirm("Grammarly Unlock is outdated. Do you want to update?")&&window.open(e.version.updateUrl,"_blank"),new Error("outdated");if(!e.isOpen)throw alert("Currently, Grammarly Unlock is closed"),new Error("closed")}catch(e){["outdated","closed"].includes(e.message)&&g(),console.error(e)}p()}()}();
